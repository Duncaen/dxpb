# How to hack on dxpb

## Generated Files

`gsl-ucg` exists for translating `.xml` files into working `.c` files.
Generated artifacts are always checked in; the user is not expected to generate
anything.

`xxd` is used for turning text descriptions, such as the `/COPYING.md` file and
help entries under `/doc/` into `.inc` files for being included to relevant
binaries. These `.inc` files must be regenerated by the developer. `make *.inc`
if in doubt. Feel free to `touch` the source files and rerun `make *.inc` if
you are unsure.

## Human Managed Files

There are six categories of files.
- `.xml`: Here there are `_msg.xml` and all other `.xml` files. The `_msg`
  variety describe the protocol message (name and fields/types). The regular
  `.xml` files are state machines. The first listed state is the entry state,
  and inheritance is only ever one level deep (Can't inherit from a `defaults`
  and then be inherited and keep the `defaults). These generate `_engine.inc`
  files, which are useful only as reference to learn how the state machine
  functions. The `.xml` is the authoritative version.
- `b*.c` modules. These exist to make writing the code easier, and actually are
  where the bulk of human written code goes. `bwords`, `bstring`, `bfs`,
  `bgraph`, `bpkg`, etc. etc.
- `check_%.c` files where `b%.c` exists. Unit tests. Should be expanded as
  necessary, and meaningful test additions are welcome. These functions become
  `check_%` binaries, with the `main()` provided by `check_main.inc`. These use
  the `check` framework for unit tests in C.
- `%.c` where `%.xml` exists and `%` does not end with `_msg`. This is where
  the human written code plugs in to the state machine and can alter the path
  of execution.
- `dxpb-%.c` provides the actual entry point to call code, and is usually as
  minimal as can be. These exist to handle command line arguments.
- `harness-%.c` provide harness based integration tests for `dxpb-%` binaries.
  These hook up the sockets to temporary sockets and send messages down the
  pipe.
